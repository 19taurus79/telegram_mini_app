# üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –î–µ–ø–ª–æ—é —Ç–∞ Rollback

## üìã –ó–º—ñ–Ω–Ω—ñ –û—Ç–æ—á–µ–Ω–Ω—è –¥–ª—è Production

–î–æ–¥–∞–π **—Ç—ñ–ª—å–∫–∏ —Ü—ñ 2 –∑–º—ñ–Ω–Ω—ñ** –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ö–æ—Å—Ç–∏–Ω–≥—É:

```env
NEXT_PUBLIC_URL_API=https://taurus.pp.ua
NEXT_PUBLIC_TELEGRAM_BOT_NAME=EridonKharkiv_bot
```

> ‚ö†Ô∏è **–í–∞–∂–ª–∏–≤–æ:** –ù–ï –¥–æ–¥–∞–≤–∞–π `NEXT_PUBLIC_FORCE_BROWSER_AUTH` –Ω–∞ –ø—Ä–æ–¥!  
> –¶—è –∑–º—ñ–Ω–Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ.  
> –ù–∞ –ø—Ä–æ–¥—ñ –¥–æ–¥–∞—Ç–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î —Ä–µ–∂–∏–º (Telegram Mini App –∞–±–æ Browser).

### Vercel
1. Project Settings ‚Üí Environment Variables
2. –î–æ–¥–∞–π –∫–æ–∂–Ω—É –∑–º—ñ–Ω–Ω—É –æ–∫—Ä–µ–º–æ
3. Environment: **Production**
4. Redeploy –ø—Ä–æ—î–∫—Ç

### Railway/Render
1. Settings ‚Üí Variables
2. –î–æ–¥–∞–π –≤—Å—ñ 4 –∑–º—ñ–Ω–Ω—ñ
3. Redeploy –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

## üîÑ Rollback –°—Ç—Ä–∞—Ç–µ–≥—ñ—è

### –®–≤–∏–¥–∫–∏–π –æ—Ç–∫–∞—Ç (Vercel)
1. Deployments ‚Üí –∑–Ω–∞–π–¥–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —É—Å–ø—ñ—à–Ω–∏–π –¥–µ–ø–ª–æ–π
2. –¢—Ä–∏ –∫—Ä–∞–ø–∫–∏ ‚Üí **Promote to Production**
3. –ì–æ—Ç–æ–≤–æ –∑–∞ 30 —Å–µ–∫—É–Ω–¥! ‚úÖ

### Git Rollback
```bash
# –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó
git checkout v1.0-before-refactor

# –ê–±–æ —Å–∫–∞—Å—É–≤–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π –∫–æ–º—ñ—Ç
git revert HEAD

# Push —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π redeploy
git push origin main
```

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é

–í—ñ–¥–∫—Ä–∏–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) —ñ –ø–µ—Ä–µ–≤—ñ—Ä:
- ‚úÖ –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ 401/403
- ‚úÖ –Ñ –ª–æ–≥ `[Axios Interceptor] Found initData` –∞–±–æ `Found accessToken`
- ‚úÖ API –∑–∞–ø–∏—Ç–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ

## üõ°Ô∏è Backup —Å—Ç–≤–æ—Ä–µ–Ω–æ

Tag: `v1.0-before-refactor` - —Å—Ç–∞–±—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è –ø–µ—Ä–µ–¥ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º

## üìù –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è

- –í–∏–¥–∞–ª–µ–Ω–æ 122+ –ø–µ—Ä–µ–¥–∞—á `initData`
- –ö–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–æ 10 —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –Ω–∞ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ
- –í—Å—ñ API –∑–∞–ø–∏—Ç–∏ —Ç–µ–ø–µ—Ä —á–µ—Ä–µ–∑ axios interceptor
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –¥–≤–æ—Ö —Ä–µ–∂–∏–º—ñ–≤: Telegram Mini App + Browser login

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ

- **–ù–ï –¥–æ–¥–∞–≤–∞–π** `NEXT_PUBLIC_DEV=true` –Ω–∞ –ø—Ä–æ–¥
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ `https://taurus.pp.ua` –¥–æ—Å—Ç—É–ø–Ω–∏–π
- –ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö - **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ redeploy**

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Backend (CORS)

**–í–∞–∂–ª–∏–≤–æ!** –î–æ–¥–∞–π –¥–æ–º–µ–Ω Vercel –¥–æ CORS –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ:

```python
# backend/main.py (–∞–±–æ –¥–µ —É —Ç–µ–±–µ FastAPI app)
origins = [
    "http://localhost",
    "http://localhost:80",
    "https://telegram-mini-app-six-inky.vercel.app",  # –¢–≤—ñ–π Vercel –¥–æ–º–µ–Ω
]

app.add_middleware(
    CORSMiddleware,
    allow_origins=origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

**–ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π wildcard –¥–ª—è –≤—Å—ñ—Ö Vercel –¥–æ–º–µ–Ω—ñ–≤:**
```python
allow_origins=["*"]  # –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –¥–ª—è –ø—Ä–æ–¥—É)
```
